!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.activeView=t():e.activeView=t()}(this,function(){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);n.d(t,"diff",function(){return r.a}),t.default={diff:r.a}},function(e,t,n){e.exports=n(0).default},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return o});var r=n(4);n.n(r);(function(e){function Action(){return _classCallCheck(this,Action),_possibleConstructorReturn(this,(Action.__proto__||Object.getPrototypeOf(Action)).apply(this,arguments))}return _inherits(Action,e),Action})(r.Enum).initEnum(["PASSIVE_REMOVE","REMOVE","CREATE","UPDATE"]);var o={type:0,params:1,content:2}},function(e,t,n){"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function isAbsKey(e){return(e||"").toString().startsWith("#")}function getContent(e){return null===e||Array.isArray(e)?null:e}function isPropObj(e){return e===Object(e)&&!Array.isArray(e)}function serialize(e){return JSON.stringify(e)}function diffObj(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=isPropObj(e),i=isPropObj(t),u={};if(!a&&!i||n&&n<=r.length)return serialize(t)!==serialize(e)&&o.push({path:r,o:t,n:e}),o;if(a)for(var c=Object.keys(e),l=0;l<c.length;){var f=c[l];u[f]=!0,diffObj(e[f],t?t[f]:void 0,n,[].concat(_toConsumableArray(r),[f]),o),l++}if(i)for(var s=0,p=Object.keys(t);s<p.length;){var y=p[s];u[y]||diffObj(void 0,t[y],n,[].concat(_toConsumableArray(r),[y]),o),s++}return o}function diffOne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"d",t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],u=(arguments.length>5&&void 0!==arguments[5]&&arguments[5],t&&Array.isArray(t[r.a.content])?t[r.a.content]:null),c=void 0,l=void 0;if(u){var f=new o;for(c=0,l=u.length;c<l;){var s=u[c],p=s[r.a.type],y=s[r.a.content],h=s[r.a.params]||{},_=f(h.key,p),v=isAbsKey(h.key),b=[].concat(_toConsumableArray(a),[c]),d=v?[_]:[].concat(_toConsumableArray(i),[_]),m=d.join("/"),O=void 0;n[m]?O=n[m]:(O={},n[m]=O),O.key=h.key,O[e]={path:b,parentPath:i.join("/"),params:h,content:getContent(y)},diffOne(e,s,n,b,d),c++}}}function arrayCompare(e,t){for(var n=Math.max(e.length,t.length),r=0;r<n;){var o=null!=e[r]?e[r]:-1,a=null!=t[r]?t[r]:-1;if(o>a)return 1;if(o<a)return-1;r++}return 0}function diff(e,t){var n={},r={},o={};diffOne("n",[null,null,e],n),diffOne("o",[null,null,t],n);var a=Object.keys(n),c=void 0,l=a.length;for(c=0;c<l;){var f=a[c],s=n[f],p=!1;s.o&&s.n&&(p=s.n.parentPath!==s.o.parentPath),(s.o&&!s.n||p)&&u(o,s.o.path,1),(s.n&&!s.o||p)&&u(r,s.n.path,-1),c++}var y=[],h=[];for(c=0;c<l;){var _=a[c],v=n[_],b=void 0,d=void 0,m=void 0,O=void 0;v.n&&(b=v.n.path,m=v.n.params),v.o&&(d=v.o.path,O=v.o.params);var g=diffObj(m,O,2);if(b&&d){var w=0,j=0,k=v.n.parentPath!==v.o.parentPath;if(k||(u(o,d,1),u(r,b,-1),w=b[b.length-1]+i(o,d)+i(r,b),j=d[d.length-1]),k||w!==j){var A={act:"cut",o:d,pair:v};g.length&&(A.modify=g),v.o.content!==v.n.content&&(A.content={o:v.o.content,n:v.n.content}),y.push(A),h.push({act:"paste",n:b,o:d,pair:v})}else{var P={n:b,o:d,pair:v};g.length&&(P.modify=g),v.o.content!==v.n.content&&(P.content={o:v.o.content,n:v.n.content}),y.push(P)}}else if(d)y.push({act:"del",o:d,pair:v});else{var C={act:"add",n:b,pair:v};g.length&&(C.modify=g),v.n.content&&(C.content={n:v.n.content}),h.push(C)}c++}return{diff:[].concat(_toConsumableArray(y.sort(function(e,t){return arrayCompare(e.o,t.o)})),_toConsumableArray(h.sort(function(e,t){return arrayCompare(e.n,t.n)})))}}t.a=diff;var r=n(2),o=function KeyGen(){_classCallCheck(this,KeyGen);var e={};return function(t,n){return n=n||"-notype",t?n+"#"+t:(e[n]=e[n]||0,e[n]++,n+":idx("+e[n]+++")")}},a=function calcShift(e,t){for(var n=0,r=0;r<t;r++)n+=e[r]?e[r].val:0;return n},i=function getShift(e,t){for(var n=e,r=t.length,o=0;o<r;o++){var i=t[o];if(!(o<r-1))return a(n,i);n=n[i].ch}},u=function addShift(e,t,n){for(var r=e,o=t.length,a=0;a<o;a++){var i=t[a];r[i]||(r[i]={ch:{},val:0}),a<o-1?r=r[i].ch:r[i].val+=n}}},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function copyProperties(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=Object.getOwnPropertyNames(t)[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var u=a.value,c=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(e,u,c)}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return e}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();Object.defineProperty(t,"__esModule",{value:!0}),t.copyProperties=copyProperties;var a=Symbol();t.Enum=function(){function Enum(){var e=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];if(_classCallCheck(this,Enum),{}.hasOwnProperty.call(this.constructor,a))throw new Error("Enum classes canâ€™t be instantiated");"object"===(void 0===e?"undefined":r(e))&&null!==e&&copyProperties(this,e)}return o(Enum,[{key:"toString",value:function toString(){return this.constructor.name+"."+this.name}}],[{key:"initEnum",value:function initEnum(e){return Object.defineProperty(this,"enumValues",{value:[],configurable:!1,writable:!1,enumerable:!0}),Array.isArray(e)?this._enumValuesFromArray(e):this._enumValuesFromObject(e),Object.freeze(this.enumValues),this[a]=!0,this}},{key:"_enumValuesFromArray",value:function _enumValuesFromArray(e){var t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;this._pushEnumValue(new this,i)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"_enumValuesFromObject",value:function _enumValuesFromObject(e){var t=!0,n=!1,r=void 0;try{for(var o,a=Object.keys(e)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value,u=new this(e[i]);this._pushEnumValue(u,i)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"_pushEnumValue",value:function _pushEnumValue(e,t){e.name=t,e.ordinal=this.enumValues.length,Object.defineProperty(this,t,{value:e,configurable:!1,writable:!1,enumerable:!0}),this.enumValues.push(e)}},{key:"enumValueOf",value:function enumValueOf(e){return this.enumValues.find(function(t){return t.name===e})}},{key:Symbol.iterator,value:function value(){return this.enumValues[Symbol.iterator]()}}]),Enum}()}])});
//# sourceMappingURL=active-view.min.js.map